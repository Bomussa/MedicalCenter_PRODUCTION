# 🏥 MedicalCenter_PRODUCTION

## 📘 نظام إدارة المركز الطبي العسكري المتقدم

نظام شامل ومتطور لإدارة الفحوصات الطبية في المراكز العسكرية، مصمم بأحدث التقنيات لضمان الكفاءة والدقة والأمان.

---

## 🌟 الميزات الرئيسية

### ✅ الميزات الأساسية
- **إدارة المرضى**: نظام متكامل لتسجيل ومتابعة المرضى
- **المسارات الطبية**: توجيه ذكي للمرضى عبر العيادات المختلفة
- **إدارة العيادات**: تحكم كامل في العيادات والأطباء والمواعيد
- **التقارير الطبية**: إنشاء وطباعة التقارير تلقائياً
- **نظام الأمان**: مصادقة متقدمة وحماية البيانات

### 🚀 الميزات المتقدمة الجديدة
- **التعليمات الصوتية**: إرشاد صوتي للمرضى
- **الإشعارات اللحظية**: تنبيهات فورية للأحداث المهمة
- **الوضع الليلي**: تجربة مستخدم محسنة في الإضاءة المنخفضة
- **المراقبة اللحظية**: مراقبة الأداء والنشاط في الوقت الفعلي
- **الطباعة التلقائية**: طباعة التقارير تلقائياً عند الانتهاء
- **الاسترداد التلقائي**: إعادة تشغيل النظام عند حدوث أخطاء
- **تحليل حركة المراجعين**: إحصائيات مفصلة عن حركة المرضى
- **تصدير البيانات**: تصدير التقارير بصيغ مختلفة (CSV, PDF)

---

## 🏗️ البنية التقنية

### Frontend (الواجهة الأمامية)
- **HTML5/CSS3/JavaScript**: واجهة مستخدم حديثة ومتجاوبة
- **Bootstrap**: تصميم متجاوب وجذاب
- **Font Awesome**: أيقونات احترافية
- **i18next**: دعم متعدد اللغات (العربية/الإنجليزية)

### Backend (الخادم)
- **Node.js**: بيئة تشغيل عالية الأداء
- **Express.js**: إطار عمل ويب سريع ومرن
- **MongoDB**: قاعدة بيانات مرنة وقابلة للتوسع
- **JWT**: نظام مصادقة آمن

### DevOps & Deployment
- **Docker**: حاويات للنشر السهل
- **PM2**: إدارة العمليات والمراقبة
- **Nginx**: خادم ويب عالي الأداء
- **SSL/TLS**: تشفير البيانات

---

## 📦 الملفات والمكونات الجديدة

### 🎵 التعليمات الصوتية
```
📁 enhancements/app/public/js/voiceInstructions.js
```
- تشغيل تعليمات منطوقة للمراجعين
- دعم اللغتين العربية والإنجليزية
- تحكم في مستوى الصوت والسرعة

### 🔔 نظام الإشعارات
```
📁 enhancements/app/services/notificationService.js
```
- إرسال إشعارات لحظية للمستخدمين
- دعم أنواع مختلفة من الإشعارات
- إدارة قائمة انتظار الإشعارات

### ⏰ جدولة الأكواد اليومية
```
📁 enhancements/app/jobs/dailyCodeJob.js
```
- توليد أكواد العيادات تلقائياً كل يوم
- جدولة المهام باستخدام cron
- سجل تاريخي للتحديثات

### 📊 تصدير البيانات
```
📁 enhancements/app/utils/exportToCSV.js
```
- تصدير التقارير بصيغة CSV
- تصدير بيانات المرضى والإحصائيات
- تنسيق البيانات للتحليل الخارجي

### 📈 لوحة الأداء
```
📁 enhancements/app/public/js/performanceDashboard.js
```
- عرض إحصائيات الأداء في الوقت الفعلي
- رسوم بيانية تفاعلية
- مؤشرات الأداء الرئيسية (KPIs)

### ⏱️ إدارة أوقات الانتظار
```
📁 enhancements/app/models/Visit.js
```
- حساب أوقات الانتظار لكل مريض
- تتبع مدة الزيارات
- إحصائيات الكفاءة

### 📊 تحليل حركة المراجعين
```
📁 enhancements/app/public/js/reviewFlowStats.js
```
- تحليل مفصل لحركة المرضى
- إحصائيات العيادات والأوقات
- رسوم بيانية تفاعلية

### 🌙 الوضع الليلي
```
📁 enhancements/app/public/js/themeToggle.js
```
- تبديل بين الوضع الليلي والنهاري
- حفظ تفضيلات المستخدم
- تصميم محسن للعيون

### 📡 المراقبة اللحظية
```
📁 enhancements/app/public/js/liveMonitor.js
```
- مراقبة النشاط في الوقت الفعلي
- عرض المستخدمين النشطين
- إحصائيات الأداء المباشرة

### 🖨️ الطباعة التلقائية
```
📁 enhancements/app/public/js/autoPrintReport.js
```
- طباعة التقارير تلقائياً عند الانتهاء
- إعدادات طباعة قابلة للتخصيص
- معاينة قبل الطباعة

### 🔄 الاسترداد التلقائي
```
📁 enhancements/app/services/recoveryService.js
```
- مراقبة صحة النظام
- إعادة تشغيل تلقائي عند الأخطاء
- تسجيل مفصل للأحداث

### 🛣️ مسارات التحسينات
```
📁 enhancements/app/routes/enhancementRoutes.js
```
- واجهات برمجية للميزات الجديدة
- إدارة الأكواد اليومية
- إحصائيات الزيارات والأداء

---

## 🚀 التثبيت والتشغيل

### المتطلبات الأساسية
- Node.js (v16 أو أحدث)
- MongoDB (v4.4 أو أحدث)
- npm أو yarn

### خطوات التثبيت

1. **استنساخ المشروع**
```bash
git clone https://github.com/Bomussa/MedicalCenter_PRODUCTION.git
cd MedicalCenter_PRODUCTION
```

2. **تثبيت التبعيات الرئيسية**
```bash
npm install
```

3. **تثبيت تبعيات التطبيق**
```bash
cd enhancements/app
npm install
```

4. **إعداد متغيرات البيئة**
```bash
cp .env.example .env
# تحرير ملف .env وإضافة الإعدادات المطلوبة
```

5. **تشغيل التطبيق**
```bash
# تشغيل الخادم الرئيسي
npm run start:server

# تشغيل تطبيق الويب
cd enhancements/app
npm start
```

### التشغيل باستخدام Docker

```bash
# بناء الصورة
docker build -t medical-center .

# تشغيل الحاوية
docker run -p 4000:4000 -p 3000:3000 medical-center
```

---

## 🔧 الإعدادات والتخصيص

### إعدادات الخادم
```javascript
// enhancements/app/config/index.js
export const config = {
    PORT: process.env.PORT || 4000,
    MONGODB_URI: process.env.MONGODB_URI || 'mongodb://localhost:27017/medical_center',
    JWT_SECRET: process.env.JWT_SECRET || 'your-secret-key',
    // المزيد من الإعدادات...
};
```

### إعدادات الميزات الجديدة
```javascript
// إعدادات التعليمات الصوتية
const voiceSettings = {
    language: 'ar-SA',
    rate: 1.0,
    pitch: 1.0,
    volume: 0.8
};

// إعدادات الطباعة التلقائية
const printSettings = {
    autoPrint: true,
    printDelay: 2000,
    paperSize: 'A4',
    orientation: 'portrait'
};
```

---

## 📋 أنواع الفحوصات المدعومة

1. **فحص الدورات الداخلية والخارجية**
2. **فحص التجنيد والترفيع**
3. **فحص النقل والتحويل**
4. **تجديد العقد**
5. **فحص الطيران السنوي**
6. **فحص الطباخين**

---

## 🏥 العيادات والمسارات

### العيادات المتاحة
- عيادة العيون
- عيادة الأنف والأذن والحنجرة
- عيادة الأسنان
- عيادة الجلدية
- عيادة القلب
- المختبر الطبي
- قسم الأشعة
- عيادة العظام

### المسارات الديناميكية
- توزيع تلقائي للمرضى لتجنب الازدحام
- مسارات مختلفة حسب نوع الفحص
- تحديث المسارات في الوقت الفعلي

---

## 🔐 الأمان والحماية

### ميزات الأمان
- **تشفير البيانات**: جميع البيانات الحساسة مشفرة
- **المصادقة المتقدمة**: نظام JWT للمصادقة الآمنة
- **التحكم في الوصول**: صلاحيات مختلفة للمستخدمين
- **تسجيل الأنشطة**: سجل مفصل لجميع العمليات
- **النسخ الاحتياطي**: نسخ احتياطية تلقائية للبيانات

### إعدادات الأمان
```javascript
// إعدادات JWT
const jwtConfig = {
    secret: process.env.JWT_SECRET,
    expiresIn: '24h',
    algorithm: 'HS256'
};

// إعدادات CORS
const corsConfig = {
    origin: process.env.ALLOWED_ORIGINS?.split(',') || ['http://localhost:3000'],
    credentials: true,
    optionsSuccessStatus: 200
};
```

---

## 📊 المراقبة والإحصائيات

### مؤشرات الأداء الرئيسية
- عدد المرضى اليومي/الأسبوعي/الشهري
- متوسط أوقات الانتظار
- معدل إنجاز الفحوصات
- كفاءة العيادات
- استخدام الموارد

### التقارير المتاحة
- تقارير يومية للنشاط
- تقارير أسبوعية للأداء
- تقارير شهرية للإحصائيات
- تقارير مخصصة حسب الفترة

---

## 🛠️ استكشاف الأخطاء وإصلاحها

### المشاكل الشائعة وحلولها

#### مشكلة: فشل في الاتصال بقاعدة البيانات
```bash
# التحقق من حالة MongoDB
sudo systemctl status mongod

# إعادة تشغيل MongoDB
sudo systemctl restart mongod
```

#### مشكلة: خطأ في تثبيت التبعيات
```bash
# تنظيف الكاش
npm cache clean --force

# حذف node_modules وإعادة التثبيت
rm -rf node_modules package-lock.json
npm install
```

#### مشكلة: فشل في تشغيل التطبيق
```bash
# التحقق من السجلات
tail -f enhancements/app/logs/app.log

# التحقق من المنافذ المستخدمة
netstat -tulpn | grep :4000
```

### أدوات التشخيص
```bash
# تشغيل أداة التشخيص
./doctor.sh

# فحص صحة النظام
curl http://localhost:4000/health

# فحص حالة الخدمات
curl http://localhost:4000/api/enhancements/daily-codes/status
```

---

## 🔄 التحديثات والصيانة

### النسخ الاحتياطية
```bash
# إنشاء نسخة احتياطية من قاعدة البيانات
mongodump --db medical_center --out ./backups/$(date +%Y%m%d)

# استعادة النسخة الاحتياطية
mongorestore --db medical_center ./backups/20231201/medical_center
```

### تحديث التطبيق
```bash
# سحب آخر التحديثات
git pull origin main

# تحديث التبعيات
npm update

# إعادة تشغيل التطبيق
pm2 restart medical-center
```

---

## 🤝 المساهمة في المشروع

### إرشادات المساهمة
1. Fork المشروع
2. إنشاء فرع للميزة الجديدة (`git checkout -b feature/amazing-feature`)
3. Commit التغييرات (`git commit -m 'Add amazing feature'`)
4. Push إلى الفرع (`git push origin feature/amazing-feature`)
5. فتح Pull Request

### معايير الكود
- استخدام ESLint للتحقق من جودة الكود
- كتابة اختبارات للميزات الجديدة
- توثيق الكود باللغة العربية
- اتباع نمط التسمية المتفق عليه

---

## 📞 الدعم والمساعدة

### معلومات الاتصال
- **البريد الإلكتروني**: support@medicalcenter.mil
- **الهاتف**: +966-11-1234567
- **الموقع الإلكتروني**: https://medicalcenter.mil

### الموارد المفيدة
- [دليل المستخدم](./docs/user-guide.md)
- [دليل المطور](./docs/developer-guide.md)
- [الأسئلة الشائعة](./docs/faq.md)
- [سجل التغييرات](./CHANGELOG.md)

---

## 📄 الترخيص

هذا المشروع مرخص تحت رخصة MIT - راجع ملف [LICENSE](LICENSE) للتفاصيل.

---

## 🙏 شكر وتقدير

نشكر جميع المساهمين في تطوير هذا النظام:
- فريق التطوير التقني
- الأطباء والممرضين للمراجعة الطبية
- فريق ضمان الجودة
- إدارة المركز الطبي للدعم المستمر

---

## 📈 خارطة الطريق المستقبلية

### الميزات المخطط لها
- [ ] تطبيق محمول (iOS/Android)
- [ ] ذكاء اصطناعي لتحليل البيانات
- [ ] تكامل مع أنظمة المستشفيات الخارجية
- [ ] نظام إدارة المواعيد المتقدم
- [ ] تقارير تحليلية متقدمة
- [ ] دعم الواقع المعزز للتوجيه

### التحسينات التقنية
- [ ] تحسين الأداء والسرعة
- [ ] دعم المزيد من اللغات
- [ ] تحسين واجهة المستخدم
- [ ] تطوير API متقدم
- [ ] تحسين الأمان والحماية

---

**© 2024 المركز الطبي العسكري المتقدم. جميع الحقوق محفوظة.**
